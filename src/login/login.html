<!DOCTYPE html>
<md-content style="max-width: 700px; margin: 0 auto;">
  <md-card layout-padding>

    <section ng-if="security.isAuthenticated()">You are logged in as <a ng-href="{{user.email}}">{{ user.name }}</a>
      <md-button type="submit" ng-click="logout()" class="md-raised md-primary">Logout</md-button>
    </section>

    <section ng-if="!security.isAuthenticated()">
      <p>You may login using your permanent password, or with a 1-time password sent to your registered email account.</p>
      <form role="form" class="np-login">
        <div>
          <md-input-container>
            <label for="username" class="md-no-float">Username (email)</label>
            <input type="text" ng-model="user.email" id="username" placeholder="your.name@npolar.no">
          </md-input-container>
          <md-input-container>
            <label for="password" class="md-no-float">Password</label>
            <input type="password" id="password" ng-model="user.password" placeholder="Password (or 1-time code)">
          </md-input-container>
        </div>
        <div class="md-actions" layout="row">

          <md-button ng-if="!isWaitingForOnetimePassword()" flex ng-click="onetimePassword(user)">Email 1-time code</md-button>
          <md-button flex ng-click="login(user.email,user.password)" class="md-raised md-primary">Login</md-button>
        </div>
        <p>Not a user? <a href="/user/register">Register</a></p>
        <p>Forgot password? Request a 1-time code above.</p>
      </form>
    </section>

  </md-card>

</md-content>
